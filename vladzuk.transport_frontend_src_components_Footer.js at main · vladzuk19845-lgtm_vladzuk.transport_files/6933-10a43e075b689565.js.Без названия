performance.mark("js-parse-end:6933-10a43e075b689565.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["6933"],{471(e,t,n){n.d(t,{_S:()=>i,cB:()=>o,cW:()=>l});var a=n(96551),r=n(95066);let i=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},l=e=>{(0,a.C3)({appId:e})},o=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};r.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:o()})},!0)},89495(e,t,n){n.d(t,{Z:()=>a});function a({appendQuery:e,retainScrollPosition:t,returnTarget:n}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:n}}))}},85970(e,t,n){n.d(t,{_:()=>r});var a=n(74848);function r({buttonFocusId:e,buttonHotkey:t,onButtonClick:n,buttonTestLabel:r,onlyAddHotkeyScopeButton:i}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{hidden:!0,"data-testid":r||"","data-hotkey":t,onClick:n,"data-hotkey-scope":e}),!i&&(0,a.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:n})]})}r.displayName="DuplicateOnKeydownButton"},12436(e,t,n){n.d(t,{Ak:()=>p,cD:()=>m,iK:()=>u});var a=n(74848),r=n(9364),i=n(556),l=n(68439),o=n(98632),s=n(96540),c=n(55669);let d=(0,l.A)("localStorage"),u=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function m({children:e,payload:t,openPanelRef:n,action:l}){let m=(0,c.E)(),p="blame"in t,f=(0,r.H)(t),h=(0,s.useCallback)(()=>m?"blame"===l:p,[m,l,p]),g=(0,s.useCallback)(()=>m?"tree"===l:f,[m,l,f]),x=(0,i.i)(),y=(0,s.useRef)(void 0),[_,w]=(0,s.useState)(()=>{let e=d.getItem("codeNavOpen");if(!x&&""!==e&&null!==e||x&&t.symbolsExpanded)return"codeNav"}),v=(h()||g())&&"codeNav"===_?void 0:_;s.useEffect(()=>{n.current=v},[v,n]);let F=(0,s.useCallback)((e,t)=>{w(n=>(n&&y.current&&y.current.focus(),y.current=t,h()||g()&&"codeNav"===e?void 0:e))},[h,g]);!function(e){let{screenSize:t}=(0,o.lm)(),n=(0,s.useRef)(t);(0,s.useEffect)(()=>{let a=n.current>=o.Gy.large,r=n.current===t;t<o.Gy.large&&(a||r)&&e(void 0),n.current=t},[t,e])}(F);let b=(0,s.useMemo)(()=>({openPanel:v,setOpenPanel:F}),[v,F]);return(0,a.jsx)(u,{value:b,children:e})}function p(){return(0,s.use)(u)}u.displayName="OpenPanelContext",m.displayName="OpenPanelProvider"},62655(e,t,n){function a(e){return r(e)[0]}function r(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,r]=n.trim().split("=");e===a&&void 0!==r&&t.push({key:a,value:r})}return t}function i(e,t,n=null,a=!1,r="lax"){let l=document.domain;if(null==l)throw Error("Unable to get document domain");l.endsWith(".github.com")&&(l="github.com");let o="https:"===location.protocol?"; secure":"",s=n?`; expires=${n}`:"";!1===a&&(l=`.${l}`);try{document.cookie=`${e}=${t}; path=/; domain=${l}${s}${o}; samesite=${r}`}catch{}}function l(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let a=new Date(Date.now()-1).toUTCString(),r="https:"===location.protocol?"; secure":"",i=`; expires=${a}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${i}${r}`}catch{}}n.d(t,{OR:()=>r,Ri:()=>a,TV:()=>i,Yj:()=>l})},20874(e,t,n){n.d(t,{L:()=>s});var a=n(74848),r=n(16522),i=n(38621),l=n(26108),o=n(34164);n(96540);let s=e=>{let t,n,s,c=(0,r.c)(17),{ref:d,expanded:u,testid:m,ariaLabel:p,ariaControls:f,onToggleExpanded:h,alignment:g,dataHotkey:x,className:y,size:_,tooltipDirection:w,variant:v}=e,F=u?`collapse-${m}`:`expand-${m}`,b=u?"left"===g?i.SidebarExpandIcon:i.SidebarCollapseIcon:"left"===g?i.SidebarCollapseIcon:i.SidebarExpandIcon;c[0]!==h?(t=e=>{h(e)},c[0]=h,c[1]=t):t=c[1];let R=v??"invisible";return c[2]!==y?(n=(0,o.$)(y,"fgColor-muted"),c[2]=y,c[3]=n):n=c[3],c[4]!==f||c[5]!==p||c[6]!==x||c[7]!==u||c[8]!==d||c[9]!==_||c[10]!==F||c[11]!==b||c[12]!==t||c[13]!==R||c[14]!==n||c[15]!==w?(s=(0,a.jsx)(l.K,{"aria-label":p,tooltipDirection:w,ref:d,"data-testid":F,"aria-expanded":u,"aria-controls":f,icon:b,"data-hotkey":x,onClick:t,variant:R,size:_,className:n}),c[4]=f,c[5]=p,c[6]=x,c[7]=u,c[8]=d,c[9]=_,c[10]=F,c[11]=b,c[12]=t,c[13]=R,c[14]=n,c[15]=w,c[16]=s):s=c[16],s};s.displayName="ExpandButton",s.displayName="ExpandButton"},53475(e,t,n){n.d(t,{Uy:()=>Z,H:()=>h,qn:()=>ew,c2:()=>em,Nq:()=>q});var a=n(74848),r=n(16522),i=n(85970),l=n(18888),o=n(20874),s=n(35349),c=n(38621),d=n(21373),u=n(34164),m=n(96540);let p=e=>{let t,n,m,p,f,h,g=(0,r.c)(32),{ref:x,expanded:y,onToggleExpanded:_,className:w,ariaControls:v,textAreaId:F,useFilesButtonBreakpoint:b,variant:R,getTooltipDirection:T}=e,C=void 0===b||b,{toggleTreeShortcut:k}=(0,l.wk)(),{isServer:I}=(0,s.V)();g[0]!==y||g[1]!==T?(t=T?.(y)??"se",g[0]=y,g[1]=T,g[2]=t):t=g[2];let j=t;g[3]!==y||g[4]!==I||g[5]!==_||g[6]!==x||g[7]!==k.hotkey||g[8]!==C||g[9]!==R?(n=C&&(!y||I)&&(0,a.jsx)(d.Q,{"aria-label":"Expand file tree",leadingVisual:c.ArrowLeftIcon,"data-hotkey":k.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:x,onClick:_,variant:R??"invisible",className:"ExpandFileTreeButton-module__Button_1__UeSyAxq",children:"Files"}),g[3]=y,g[4]=I,g[5]=_,g[6]=x,g[7]=k.hotkey,g[8]=C,g[9]=R,g[10]=n):n=g[10];let N=k.hotkey,S=C&&(!y||I);g[11]!==w||g[12]!==S?(m=(0,u.$)(w,"position-relative","ExpandFileTreeButton-module__expandButton__rEZZsDe",{"ExpandFileTreeButton-module__filesButtonBreakpoint__A9ISuMX":S}),g[11]=w,g[12]=S,g[13]=m):m=g[13];let E=y?"Collapse file tree":"Expand file tree";return g[14]!==v||g[15]!==y||g[16]!==_||g[17]!==x||g[18]!==m||g[19]!==E||g[20]!==k.hotkey||g[21]!==j||g[22]!==R?(p=(0,a.jsx)(o.L,{dataHotkey:N,className:m,expanded:y,alignment:"left",ariaLabel:E,tooltipDirection:j,testid:"file-tree-button",ariaControls:v,ref:x,variant:R,onToggleExpanded:_}),g[14]=v,g[15]=y,g[16]=_,g[17]=x,g[18]=m,g[19]=E,g[20]=k.hotkey,g[21]=j,g[22]=R,g[23]=p):p=g[23],g[24]!==_||g[25]!==F||g[26]!==k.hotkey?(f=(0,a.jsx)(i._,{buttonFocusId:F,buttonHotkey:k.hotkey,onButtonClick:_,onlyAddHotkeyScopeButton:!0}),g[24]=_,g[25]=F,g[26]=k.hotkey,g[27]=f):f=g[27],g[28]!==n||g[29]!==p||g[30]!==f?(h=(0,a.jsxs)(a.Fragment,{children:[n,p,f]}),g[28]=n,g[29]=p,g[30]=f,g[31]=h):h=g[31],h};p.displayName="ExpandFileTreeButton",p.displayName="ExpandFileTreeButton";var f=n(77277);function h(e){let t,n,o=(0,r.c)(8),{inputRef:s,onFindFilesShortcut:c,textAreaId:d}=e,{sendRepoKeyDownEvent:u}=(0,f.T)(),{findFilesShortcut:m}=(0,l.wk)();return o[0]!==s||o[1]!==c||o[2]!==u?(t=()=>{c?.(),s?.current?.focus(),u("GO_TO_FILE")},o[0]=s,o[1]=c,o[2]=u,o[3]=t):t=o[3],o[4]!==m.hotkey||o[5]!==t||o[6]!==d?(n=(0,a.jsx)(i._,{buttonFocusId:d,buttonHotkey:m.hotkey,onButtonClick:t}),o[4]=m.hotkey,o[5]=t,o[6]=d,o[7]=n):n=o[7],n}h.displayName="FindFilesShortcut";var g=n(37013),x=n(89001),y=n(68216),_=n(12436),w=n(65513),v=n(70516),F=n(49159),b=n(32764),R=n(55669),T=n(91374),C=n(98632),k=n(79008),I=n(29941),j=n(47819),N=n(26108),S=n(87555),E=n(45721),O=n(10095),P=n(4723);let B=(0,m.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});B.displayName="FileTreeContext";var $=n(68695);async function D({contentUrl:e,isDataRouterEnabled:t=!1,path:n,tree:a}){if(t)return V({contentUrl:e,path:n,tree:a});let r=await (0,$.lS)(`${e}?noancestors=1`);if(!r.ok)throw Error(`Failed to fetch tree data: ${r.status} ${r.statusText}`);let i=await r.json();return{tree:{items:i.payload.tree.items,totalCount:i.payload.tree.totalCount}}}async function V({contentUrl:e,path:t,tree:n}){let a=await (0,$.lS)(e,{method:"POST",body:{branch:n,start:t,stop:t}});if(!a.ok)throw Error(`Failed to fetch tree data: ${a.status} ${a.statusText}`);let r=await a.json(),i=r?.payload?.fileTree?.fileTree?.[t];if(!i)throw Error(`Unable to find payload for fileTree items at path: ${t}`);return{tree:i}}let A="ReposFileTreePane-module__HideTree__os1Arl_",G="ReposFileTreePane-module__PaneContentsHiddenOnNarrow__iNRww3T";var W=n(75474),L=n(58632),U=n(8035),H=n(1703),K=n(58630),M=n(7478);let z=(0,m.createContext)({});function q(e){let t,n,i,l,o,s=(0,r.c)(6),{children:c}=e,d=(0,m.useRef)(!1),u=(0,m.useRef)(!1),p=(0,m.useRef)(!0);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{d.current=e},s[0]=t):t=s[0];let f=t;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{u.current=e},s[1]=n):n=s[1];let h=n;s[2]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{p.current=e},s[2]=i):i=s[2];let g=i;s[3]===Symbol.for("react.memo_cache_sentinel")?(l={expandAllFolders:d,refreshTree:u,shouldFetchFolders:p,setExpandAllFolders:f,setRefreshTree:h,setShouldFetchFolders:g},s[3]=l):l=s[3];let x=l;return s[4]!==c?(o=(0,a.jsx)(z,{value:x,children:c}),s[4]=c,s[5]=o):o=s[5],o}function Z(){return(0,m.use)(z)}z.displayName="FileTreeControlContext",q.displayName="FileTreeControlProvider";var Y=n(52870);function X(e,t,n){let a=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),l=i>0?t.slice(0,i):t,o=`${e}/${l}`;if(n&&n.some(e=>e.path===o))continue;let s={items:[],data:{contentType:o===r?"file":"directory",name:l,path:o,isClientOnly:!0}};a.push(s)}return a}function Q(e,t,n){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let a=t.name.slice(0,t.name.lastIndexOf("/")),r=a.indexOf("/")>-1,i={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:a,hasSimplifiedPath:r},l={items:[e],data:i};return(n.set(i.path,l),r)?Q(l,{...i},n):l}function J(e,t,n,a){if(!e)return{newRootItems:n,rootItemsUpdated:!1};let r=!!e[""]&&ee("",t,n,e[""].items);for(let r of(a?.(n),Object.keys(e).sort()))if(r){let n=t.get(r);n&&(ee(r,t,n.items,e[r].items,a),n.data.totalCount=e[r].totalCount)}return{newRootItems:n,rootItemsUpdated:r}}function ee(e,t,n,a,r){let i=!1;for(let l of a){let a=e?`${e}/${l.name}`:l.name;if(!t.get(a)){let e={items:[],data:{...l}};if(t.set(a,e),l.hasSimplifiedPath){let a=Q(e,l,t),o=n.findIndex(e=>e.data.path===a.data.path);-1!==o?a.items.length>n[o].items.length&&(n[o]=a,i=!0):(n.push(a),r?.(n))}else n.push(e),r?.(n)}}return i}function et(e){let t,n,i,l,o,s,d,u,p,h,g,x,y=(0,r.c)(43),{isActive:_,file:w,onItemSelected:v,getItemUrl:F,selectedItemRef:b,navigate:R,onRenderRow:T,getFileTrailingVisual:C,getFileIcon:k}=e,{sendRepoClickEvent:I}=(0,f.T)(),j=m.useRef(null);y[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:j,mouseRowRef:j},y[0]=t):t=y[0];let N=(0,U.Z)(t),S="submodule"===w.data.contentType;y[1]!==w.data||y[2]!==C?(n=C?.(w.data),y[1]=w.data,y[2]=C,y[3]=n):n=y[3];let E=n;y[4]!==w.data||y[5]!==F||y[6]!==_||y[7]!==S||y[8]!==R||y[9]!==v||y[10]!==I?(i=e=>{S?(e.preventDefault(),w.data.submoduleUrl&&(window.location.href=w.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(F(w.data),"_blank"),e.preventDefault()):_?e.preventDefault():(v?.(),I("FILES_TREE.ITEM",{item_path:w.data.path}),R(F(w.data)),e.stopPropagation())},y[4]=w.data,y[5]=F,y[6]=_,y[7]=S,y[8]=R,y[9]=v,y[10]=I,y[11]=i):i=y[11];let O=i;T?.();let P=`${w.data.path}-item`,B=_?void 0:"auto 2rem";y[12]!==w.data||y[13]!==k||y[14]!==S?(l=k?k(w.data):S?(0,a.jsx)(c.FileSubmoduleIcon,{}):(0,a.jsx)(c.FileIcon,{}),y[12]=w.data,y[13]=k,y[14]=S,y[15]=l):l=y[15],y[16]!==l?(o=(0,a.jsx)(K.G.LeadingVisual,{children:l}),y[16]=l,y[17]=o):o=y[17];let $=S?"var(--fgColor-accent, var(--color-accent-fg))":void 0;return y[18]!==$?(s={color:$},y[18]=$,y[19]=s):s=y[19],y[20]!==w.data.name||y[21]!==b||y[22]!==s?(d=(0,a.jsx)("span",{ref:b,style:s,children:w.data.name}),y[20]=w.data.name,y[21]=b,y[22]=s,y[23]=d):d=y[23],y[24]!==w.data.name||y[25]!==N?(u=N&&(0,a.jsx)(L.m,{"data-testid":`${w.data.name}-item-tooltip`,id:`${w.data.name}-item-tooltip`,contentRef:j,"aria-label":w.data.name,open:!0,direction:"ne"}),y[24]=w.data.name,y[25]=N,y[26]=u):u=y[26],y[27]!==d||y[28]!==u?(p=(0,a.jsxs)(a.Fragment,{children:[d,u]}),y[27]=d,y[28]=u,y[29]=p):p=y[29],y[30]!==E?(h=!!E?.screenReaderText&&(0,a.jsx)("span",{className:"sr-only",children:E.screenReaderText}),y[30]=E,y[31]=h):h=y[31],y[32]!==E?(g=!!E?.trailingVisual&&(0,a.jsx)(K.G.TrailingVisual,{children:E.trailingVisual}),y[32]=E,y[33]=g):g=y[33],y[34]!==_||y[35]!==O||y[36]!==p||y[37]!==h||y[38]!==g||y[39]!==P||y[40]!==B||y[41]!==o?(x=(0,a.jsxs)(K.G.Item,{ref:j,onSelect:O,current:_,id:P,containIntrinsicSize:B,children:[o,p,h,g]}),y[34]=_,y[35]=O,y[36]=p,y[37]=h,y[38]=g,y[39]=P,y[40]=B,y[41]=o,y[42]=x):x=y[42],x}et.displayName="WrappedFileTreeRow";let en=m.memo(et);function ea({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:r,leadingPath:i="",onItemSelected:l,dispatchKnownFolders:o,getItemUrl:s,getFetchUrl:c,selectedItemRef:d,navigate:u,onRenderRow:p,getFileTrailingVisual:h,getFileIcon:g,navigateOnClick:x=!0,treeName:y}){let{expandAllFolders:_,shouldFetchFolders:w}=Z(),[v,F]=(0,m.useState)(_?.current||r),{sendRepoClickEvent:b}=(0,f.T)(),T=m.useRef(null),C=m.useRef(null),k=(0,U.Z)({focusRowRef:C,mouseRowRef:T}),[I,j,N,S,E,O,P]=function(e,t,n,a){let[r,i]=m.useState(e.items),[l,o]=m.useState(e.data.totalCount||0),[s,c]=m.useState(!1),[d,u]=m.useState(!1),{safeSetTimeout:p}=(0,Y.A)(),f=(0,R.E)();m.useEffect(()=>{i(e.items)},[e.items]),m.useEffect(()=>{void 0!==e.data.totalCount&&o(e.data.totalCount)},[e.data.totalCount]);let h=m.useCallback(()=>{u(!1)},[]),g=m.useCallback((e,t)=>{let n=e||[...r];i(n.slice(0,100)),p(()=>{i(n),void 0!==t&&o(t)},1)},[r,p]);return[m.useCallback(async r=>{let l=new Map;if(e.data.isClientOnly){if(r){let n=X(e.data.path,r);for(let e of n)l.set(e.data.path,e);t({type:"add",folders:l,processingTime:0}),n.length>100?g(n,n.length):(i(n),o(n.length))}}else{let s=n(e.data);u(!1),c(!0);let d=Date.now();try{let n=await D({contentUrl:s,isDataRouterEnabled:f,path:e.data.path,tree:a}),c=n.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.tree.items.length};return(l.set(e.path,t),e.hasSimplifiedPath)?Q(t,e,l):t});if(r){let t=e.data.path,a=X(t,r,n.tree.items);for(let e of(c.push(...a),a))l.set(e.data.path,e)}t({type:"add",folders:l,processingTime:Date.now()-d}),e.items=c,e.data.totalCount=n.tree.totalCount,c.length>100?g(c,n.tree.totalCount):(i(c),o(n.tree.totalCount))}catch{u(!0)}}c(!1)},[n,e,t,g,a,f]),g,r,s,d,h,l]}(t,o,c,y),B=P-N.length,$=i?`${i}/`:"";(0,m.useEffect)(()=>{_?.current&&!v&&F(!0)},[t,_,v]);let V=m.useCallback(a=>{_?.current&&(_.current=!1),a&&!v&&!S&&!E&&(t.items.length>100?j():0!==t.items.length||n||r||w?.current===!1||I(e)),a!==v&&F(a)},[_,v,S,E,t.items.length,n,r,w,j,I,e]),A=m.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&x?(window.open(s(t.data),"_blank"),e.preventDefault()):n?e.preventDefault():(l?.(),b("FILES_TREE.ITEM",{item_path:t.data.path}),x?u(s(t.data)):V?.(!v),e.stopPropagation())},[t.data,s,n,v,u,x,l,V,b]);m.useEffect(()=>{r&&!v&&V?.(!0)},[r]),m.useEffect(()=>{0===t.items.length&&v?V?.(!1):!v&&t.autoExpand&&V?.(!0)},[t.items.length]);let G=m.useCallback(e=>{d&&n&&d(e),T.current=e},[d,n]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,a.jsx)(el,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:$+t.data.name,inheritsActive:n,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:x,getFileTrailingVisual:h,getFileIcon:g,treeName:y}):(p?.(),(0,a.jsxs)(K.G.Item,{ref:C,expanded:v,onExpandedChange:V,current:n,onSelect:A,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,a.jsx)(K.G.LeadingVisual,{children:(0,a.jsx)(K.G.DirectoryIcon,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{ref:G,children:[$,t.data.name]}),k&&(0,a.jsx)(L.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:C,"aria-label":`${$}${t.data.name}`,open:!0,direction:"ne"})]}),(0,a.jsx)(K.G.SubTree,{state:S?"loading":E?"error":"done",children:E?(0,a.jsx)(K.G.ErrorDialog,{onRetry:I,onDismiss:O,children:"There was an error loading the folder contents."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el,{clientOnlyFilePaths:e,directoryItems:N,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:x,getFileTrailingVisual:h,getFileIcon:g,treeName:y}),B>0&&(0,a.jsx)(es,{message:`${B} entries not shown`})]})})]}))}en.displayName="FileTreeRow",ea.displayName="WrappedDirectoryTreeRow";let er=m.memo(ea);function ei({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:r,onItemSelected:i,dispatchKnownFolders:l,selectedItemRef:o,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:d,getFileIcon:u,directoryNavigateOnClick:p=!0,treeName:f}){let{path:h}=(0,W.eu)(),g=(0,w.Z)(),x=(0,H.Z)(),y=m.useRef(x);return(0,a.jsx)(a.Fragment,{children:t.map(t=>{let m=h===t.data.path,x=m||h.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,a.jsx)(er,{clientOnlyFilePaths:e,isActive:r||m,isAncestorOfActive:x,onItemSelected:i,leadingPath:n,directory:t,dispatchKnownFolders:l,getItemUrl:c,getFetchUrl:g.getItemUrl,selectedItemRef:x?o:void 0,navigate:y.current,onRenderRow:s,navigateOnClick:p,getFileTrailingVisual:d,getFileIcon:u,itemCount:t.items.length,treeName:f},t.data.name):(0,a.jsx)(en,{onItemSelected:i,file:t,isActive:m,getItemUrl:c,selectedItemRef:m?o:void 0,navigate:y.current,onRenderRow:s,getFileTrailingVisual:d,getFileIcon:u,treeName:f},t.data.name)})})}er.displayName="DirectoryTreeRow",ei.displayName="WrappedDirectoryContents";let el=m.memo(ei);function eo(e){let{clientOnlyFilePaths:t,data:n,rootItems:r,setRootItems:i,fetchError:l,incompleteFileTree:o,processingTime:s,loading:c,onRenderRow:d,getItemUrl:p,getFileTrailingVisual:f,getFileIcon:h,sortDirectoryItems:g,treeName:x}=e,{knownFolders:y,dispatchKnownFolders:_}=(0,m.use)(B),{refreshTree:w}=Z();m.useEffect(()=>{if(c)return;let e=new Map,t=[];w?.current||(e=new Map(y),t=r.slice());let{newRootItems:a,rootItemsUpdated:l}=J(n,e,t,g);(a.length>r.length||l||w?.current)&&i(a),(e.size>y.size||w?.current)&&_({type:"set",folders:e,processingTime:s}),w?.current&&(w.current=!1)},[n,c]);let v=m.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{onMouseDown:v,className:(0,u.$)(e.className,"ReposFileTreeView-module__Box__rY5iFZi"),"data-testid":"repos-file-tree-container",children:c?(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_1__HEpudcb",children:(0,a.jsx)(M.A,{"aria-label":"Loading file tree"})}):(0,a.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,a.jsxs)(K.G,{"aria-label":"Files",children:[l&&(0,a.jsx)(es,{message:"Some files could not be loaded."}),o&&(0,a.jsx)(es,{message:"Sign in to see the full file tree."}),(0,a.jsx)(el,{clientOnlyFilePaths:t,directoryItems:r,onItemSelected:e.onItemSelected,dispatchKnownFolders:_,selectedItemRef:e.selectedItemRef,onRenderRow:d,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:p,getFileTrailingVisual:f,getFileIcon:h,treeName:x})]})})})})}function es(e){let t,n,i=(0,r.c)(3),{message:l}=e,o=l||"Couldn't load.";return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(K.G.LeadingVisual,{children:(0,a.jsx)(O.A,{icon:c.AlertFillIcon,className:"ReposFileTreeView-module__Octicon__bcxNpPv"})}),i[0]=t):t=i[0],i[1]!==o?(n=(0,a.jsxs)(K.G.Item,{id:"error-tree-row",children:[t,(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_2__Qxi_C9D",children:o})]}),i[1]=o,i[2]=n):n=i[2],n}el.displayName="DirectoryContents",eo.displayName="ReposFileTreeView",es.displayName="ErrorTreeRow";var ec=n(89495);function ed(e){let t,n,o,s,d,m,p=(0,r.c)(18),{className:f,onClick:h,textAreaId:g}=e,{searchShortcut:x}=(0,l.wk)(),y=x.hotkey;return p[0]!==h?(t=e=>{h?.(),(0,ec.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})},p[0]=h,p[1]=t):t=p[1],p[2]!==f?(n=(0,u.$)("SearchButton-module__IconButton__uGkXY5u",f),p[2]=f,p[3]=n):n=p[3],p[4]!==x.hotkey||p[5]!==t||p[6]!==n?(o=(0,a.jsx)(N.K,{"aria-label":"Search this repository",tooltipDirection:"nw",icon:c.SearchIcon,"data-hotkey":y,size:"medium",onClick:t,className:n}),p[4]=x.hotkey,p[5]=t,p[6]=n,p[7]=o):o=p[7],p[8]!==h||p[9]!==g?(s=()=>{let e=document.getElementById(g);h?.(),(0,ec.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},p[8]=h,p[9]=g,p[10]=s):s=p[10],p[11]!==x.hotkey||p[12]!==s||p[13]!==g?(d=(0,a.jsx)(i._,{buttonFocusId:g,buttonHotkey:x.hotkey,onButtonClick:s,onlyAddHotkeyScopeButton:!0}),p[11]=x.hotkey,p[12]=s,p[13]=g,p[14]=d):d=p[14],p[15]!==o||p[16]!==d?(m=(0,a.jsxs)(a.Fragment,{children:[o,d]}),p[15]=o,p[16]=d,p[17]=m):m=p[17],m}ed.displayName="SearchButton";let eu=C.Gy.xxxlarge;function em({clientOnlyFilePaths:e,collapseTree:t,showTree:n,fileTree:r,treeToggleElement:i,treeToggleRef:l,onItemSelected:o,processingTime:d,searchBoxRef:p,repo:f,path:F,refInfo:$,isFilePath:V,foldersToFetch:W,incompleteFileTree:L,id:U,onFindFilesShortcut:H,textAreaId:K,getItemUrlOverride:M,headerClassName:z,paneClassName:q,paneContentsClassName:Z,treeContainerClassName:Y,findFileWorkerPath:X,headerContent:Q,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,showFindFile:ea=!0,directoryNavigateOnClick:er=!0,showRefSelectorRow:ei=!0,paneResizable:el=!0}){if(ea&&void 0===X)throw Error("findFileWorkerPath must be provided when showFindFile is true");let{openPanel:es}=(0,_.Ak)(),[ec,em]=m.useState(W.length>0),[eh,eg]=m.useState(!1),ex=m.useRef([]),ey=m.useRef(0),e_=m.useRef(null),ew=m.useRef(!1),ev=m.useRef(null),{query:eF}=(0,y.JS)(),eb=m.useRef(eF);eb.current=eF;let{codeCenterOption:eR}=(0,k.ud)(),eT=m.useRef(es),{isServer:eC}=(0,s.V)(),{defaultBranch:ek}=(0,v.t)(),{getItemUrl:eI,getFileTreeUrl:ej}=(0,w.Z)(),eN=M||eI,eS=(0,R.E)(),eE=[],eO=new Map,eP=m.useRef(ec);!eP.current&&r&&(eE=J(r,eO,[],en).newRootItems),eP.current=!0;let[eB,e$]=m.useReducer(ep,eO),[eD,eV]=m.useState(eE);m.useEffect(()=>{n&&(!eF||window.innerWidth>=C.Gy.large)||(ev.current=null)},[n,eF]),m.useEffect(()=>{es&&eT.current!==es&&window.innerWidth<eu&&t({setPreference:!1}),eT.current=es},[t,es]);let eA=m.useCallback(async e=>{let t=eS?ej():eI({contentType:"directory",path:e,name:e});try{let n=await D({contentUrl:t,path:e,tree:$.name,isDataRouterEnabled:eS}),a={items:n.tree.items,totalCount:n.tree.totalCount};r[e]=a}catch{eg(!0)}ex.current.push(e),ey.current-=1,0===ey.current&&em(!1)},[r,eI,$.name,eS,ej]);m.useEffect(()=>{if(L)return void em(!1);if(!W||0===W.length)return;let e=W.filter(e=>!ex.current.includes(e));if(e.length>0)for(let t of(ey.current+=e.length,em(!0),e))eA(t)},[eA,W,L]);let eG=m.useCallback(e=>{n&&(!eb.current||window.innerWidth>=C.Gy.large)&&e_.current&&e&&(0,I.Rt)(e,e_.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[n]),eW=m.useCallback(e=>{e&&ew.current?ew.current=!1:ev.current!==e&&eG(e),ev.current=e},[eG]),eL=m.useCallback(e=>{e_.current=e,window.innerWidth>=eu&&eG(ev.current)},[eG]),eU=m.useCallback(e=>{e&&eG(ev.current)},[eG]),{screenSize:eH}=(0,C.lm)(),eK=!eC&&(es&&eH<eu||eH<C.Gy.xlarge)&&eH>=C.Gy.large,eM=m.useCallback(()=>{eK||o(),ew.current=!0},[o,eK]),ez=V?F.substring(0,F.lastIndexOf("/")):F,eq=(0,m.useMemo)(()=>({knownFolders:eB,dispatchKnownFolders:e$}),[eB]),eZ=m.useMemo(()=>eC?null:(0,P.KF)(),[eC]),eY=m.useCallback(()=>{window.innerWidth>C.Gy.large&&window.innerWidth<C.Gy.xxxxlarge&&t({setPreference:!1})},[t]),eX=$.name===ek,eQ=(0,a.jsxs)("div",{id:U,className:(0,u.$)("ReposFileTreePane-module__PaneContents__UXFY2mG",eC&&G,Z),children:[(0,a.jsxs)("div",{className:(0,u.$)(z,"ReposFileTreePane-module__Box_1__Y8K4NoF"),children:[Q,ei&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_2__vMQBXFB",children:[(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_3__Hls8HRm",children:eX||void 0===$.fileExistsOnDefault?(0,a.jsx)(x.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0}):(0,a.jsxs)(j.A,{className:"ReposFileTreePane-module__FullWidthButtonGroup__xvY3NwL",children:[$.fileExistsOnDefault?(0,a.jsx)(N.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",as:T.N,to:(0,b.IO9)({repo:f,commitish:ek,action:"blob",path:F})}):(0,a.jsx)(N.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",description:"File does not exist on default branch","aria-disabled":!0,inactive:!0}),(0,a.jsx)(x.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})]})}),(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_4__RNDhqfw",children:[$.canEdit&&(0,a.jsx)(N.K,{"aria-label":"Add file",tooltipDirection:"n",as:T.N,icon:c.PlusIcon,to:(0,b.IO9)({repo:f,path:ez,commitish:$.name,action:"new"}),onClick:eM,className:"ReposFileTreePane-module__IconButton__mpL2tLd"}),(0,a.jsx)(ed,{className:$.canEdit?"ReposFileTreePane-module__SearchButtonWithLeftBorder__QOxYVO8":void 0,onClick:eY,textAreaId:K})]})]})]}),$.currentOid&&ea&&X&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.default,{commitOid:$.currentOid,findFileWorkerPath:X,onItemSelected:o,searchBoxRef:p,className:(0,u.$)("ReposFileTreePane-module__FileResultsList__gHLS8F8",eC&&G)}),(0,a.jsx)(h,{inputRef:p,onFindFilesShortcut:H,textAreaId:K})]}),(0,a.jsx)(ef,{scrollingRef:e_}),(0,a.jsxs)("div",{ref:eL,className:(0,u.$)("ReposFileTreePane-module__Box_5__sxoA1v3",eC&&G),children:[eC?$.currentOid&&(0,a.jsx)("div",{className:eF?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(eo,{clientOnlyFilePaths:e,data:r,rootItems:eD,selectedItemRef:eW,setRootItems:eV,onItemSelected:eM,processingTime:d,loading:ec,fetchError:eh,incompleteFileTree:L,directoryNavigateOnClick:er,getItemUrl:eN,className:Y,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,treeName:$.name})}):eZ&&(0,a.jsx)(P.bL,{node:eZ}),!$.currentOid&&!f.isEmpty&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_6__xTY5mUl",children:[(0,a.jsx)(O.A,{icon:c.AlertFillIcon}),"\xa0Ref is invalid"]})]})]});return(0,a.jsxs)(B,{value:eq,children:[eZ&&(0,a.jsx)(P.oj,{node:eZ,children:$.currentOid&&(0,a.jsx)("div",{className:eF?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(eo,{clientOnlyFilePaths:e,data:r,directoryNavigateOnClick:er,rootItems:eD,selectedItemRef:eW,setRootItems:eV,onItemSelected:eM,processingTime:d,loading:ec,fetchError:eh,incompleteFileTree:L,getItemUrl:eN,className:Y,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,treeName:$.name})})}),!n&&eR.enabled&&i&&(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_7__RUUksMq",children:i}),(0,a.jsx)(S.O7.Pane,{position:"start",sticky:!0,padding:"none",width:"large",resizable:!!el,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"none",narrow:"none"},className:(0,u.$)("ReposFileTreePane-module__Pane__G6mCt9A",!n&&A,eK||es?"ReposFileTreePane-module__HidePaneWithTreeOverlay__nxcY9jg":"ReposFileTreePane-module__HidePane__glpb72p",q),children:n&&!eK&&(0,a.jsx)("div",{className:eC?es?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:eQ})}),n&&eK&&eT.current===es&&(0,a.jsx)(E.Ay,{className:(0,u.$)(eC?es?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,"ReposFileTreePane-module__Overlay__Zs4814J",!n&&A),ref:eU,returnFocusRef:l,onClickOutside:eY,onEscape:eY,top:0,position:"fixed",children:(0,a.jsx)(a.Fragment,{children:eQ})})]})}function ep(e,t){switch(t.type){case"set":{let n=e?.size>0;return(0,F.BI)("file-tree",{"fetch-count":n?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":n?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let n=new Map([...e,...t.folders]);return(0,F.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":n.size,"nav-type":"fetch","processing-time":t.processingTime}),n}default:throw Error(`Unknown action type: ${t.type}`)}}function ef({scrollingRef:e}){let[t,n]=m.useState(e.current&&e.current.scrollTop>0);return m.useEffect(()=>{if(e.current){let t=e.current,a=()=>{t&&t.scrollTop>0?n(!0):n(!1)};return t.addEventListener("scroll",a),()=>{t.removeEventListener("scroll",a)}}},[e]),t?(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_8__XoRqKH0"}):null}em.displayName="ReposFileTreePane",ef.displayName="TreeBorder";var eh=n(47698),eg=n(62655),ex=n(556),ey=n(95066),e_=n(46249);function ew(e,t,n,r,i,l="fileTreeExpanded",o){let{sendRepoClickEvent:s}=(0,f.T)(),c=(0,ex.i)(),d=l?(0,eg.Ri)(l):void 0,u=void 0===ey.XC,h=!c&&d&&"false"!==d.value||c&&n;void 0===h&&(h=!1);let g=(0,m.useRef)(null),x=(0,m.useRef)(null),{screenSize:y}=(0,C.lm)(),[_,w]=(0,m.useState)(h),v=(0,m.useRef)(h),F=(0,m.useRef)(!1),b=(0,m.useRef)(!1),R=(0,m.useCallback)(()=>!(t.current&&window.innerWidth>=eu||!t.current&&window.innerWidth>=C.Gy.xlarge),[t]);(0,m.useLayoutEffect)(()=>{let e=R();e||(F.current=!1),w((0,eh.q)()&&y<C.Gy.large&&!b.current||(!e||F.current)&&(c&&_||!c&&d?.value!=="false"))},[F,d?.value,y,t,R,c]),(0,m.useLayoutEffect)(()=>{let e=!t.current&&window.innerWidth<C.Gy.xlarge,n=!t.current&&window.innerWidth>=C.Gy.xlarge;e&&v.current&&!(0,eh.q)()&&_&&w(!1),n&&v.current&&!_&&w(!0)},[t,y]),(0,m.useLayoutEffect)(()=>{let e=t.current&&window.innerWidth<eu,n=t.current&&window.innerWidth>=eu;e&&v.current&&!(0,eh.q)()&&_&&w(!1),n&&v.current&&!_&&w(!0)},[t]);let T=(0,m.useCallback)(e=>{if(w(!0),R()&&(F.current=!0),e?.setPreference&&(i?.(!0),v.current=!0,l)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eg.TV)(l,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>g.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>x.current?.focus())},[l,2592e6,R,i]),k=(0,m.useCallback)(e=>{if(w(!1),F.current=!1,b.current=!0,e?.setPreference&&(i?.(!1),v.current=!1,l)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eg.TV)(l,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>g.current?.focus())},[l,2592e6,i]),I=(0,m.useCallback)(e=>e&&window.innerWidth>=eu||!t.current&&window.innerWidth>=C.Gy.xlarge,[t]),j=(0,m.useMemo)(()=>(0,a.jsx)(e_.A,{as:"h2",className:"use-tree-pane-module__Heading__OiAv1P0",children:(0,a.jsx)(p,{expanded:_,ariaControls:e,onToggleExpanded:()=>{s(_?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),_?k({focus:"toggleButton",setPreference:I(t.current)}):T({focus:"toggleButton",setPreference:I(t.current)})},className:void 0!==d||_||u?void 0:"react-tree-toggle-button-with-indicator",ref:g,textAreaId:r,...o})}),[_,e,d,u,r,o,s,k,I,t,T]);return{isTreeExpanded:_,expandTree:T,collapseTree:k,treeToggleElement:j,treeToggleRef:g,searchBoxRef:x}}},9652(e,t,n){n.d(t,{G:()=>a});let a=e=>({})},79008(e,t,n){n.d(t,{T2:()=>c,cp:()=>f,ud:()=>g});var a=n(74848),r=n(16522),i=n(68439),l=n(96540);let o=(0,i.A)("localStorage"),s="codeView.codeFolding",c="codeView.codeWrapping",d="codeView.centerView",u="codeView.openSymbolsOnClick",m=new Map([[s,"Show code folding buttons"],[c,"Wrap lines"],[d,"Center content"],[u,"Open symbols on click"]]),p=(0,l.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}});p.displayName="CodeViewOptionsContext";let f=e=>{let t,n,i=(0,r.c)(8),{children:l}=e,o=h(s,!0),m=h(c,!1),f=h(d,!1),g=h(u,!0);i[0]!==f||i[1]!==o||i[2]!==m||i[3]!==g?(t={codeFoldingOption:o,codeWrappingOption:m,codeCenterOption:f,openSymbolsOption:g},i[0]=f,i[1]=o,i[2]=m,i[3]=g,i[4]=t):t=i[4];let x=t;return i[5]!==l||i[6]!==x?(n=(0,a.jsx)(p,{value:x,children:l}),i[5]=l,i[6]=x,i[7]=n):n=i[7],n};function h(e,t){let n,a,i,s,c=(0,r.c)(11);c[0]!==e?(n=o.getItem(e),c[0]=e,c[1]=n):n=c[1];let d=n;c[2]!==t||c[3]!==d?(a=()=>d?"true"===d:t,c[2]=t,c[3]=d,c[4]=a):a=c[4];let[u,p]=(0,l.useState)(a);c[5]!==e?(i=m.get(e)||"",c[5]=e,c[6]=i):i=c[6];let f=i;return c[7]!==u||c[8]!==f||c[9]!==e?(s={name:e,enabled:u,setEnabled:p,label:f},c[7]=u,c[8]=f,c[9]=e,c[10]=s):s=c[10],s}function g(){return(0,l.use)(p)}f.displayName="CodeViewOptionsProvider"}}]);
//# sourceMappingURL=6933-10a43e075b689565-9e26fc5c716c927e.js.map