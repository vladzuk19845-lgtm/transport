performance.mark("js-parse-end:53003-3899368640b09c81.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["53003"],{64278(e,t,r){r.d(t,{E:()=>i});var n=r(74848),o=r(4045);function i({children:e}){return(0,o.P)()?(0,n.jsx)(n.Fragment,{children:e}):null}i.displayName="AllShortcutsEnabled"},4045(e,t,r){r.d(t,{$:()=>a,P:()=>s});var n=r(74848),o=r(96540);let i=o.createContext(!0);function a({allShortcutsEnabled:e,children:t}){return(0,n.jsxs)(i,{value:e,children:[" ",t," "]})}function s(){return o.use(i)}i.displayName="AllShortcutsEnabledContext",a.displayName="AllShortcutsEnabledProvider"},68216(e,t,r){r.d(t,{Ck:()=>s,JS:()=>a});var n=r(74848),o=r(96540);let i=(0,o.createContext)({query:"",setQuery:()=>void 0});function a(){return(0,o.use)(i)}function s({children:e}){let[t,r]=(0,o.useState)(""),a=(0,o.useMemo)(()=>({query:t,setQuery:r}),[r,t]);return(0,n.jsx)(i,{value:a,children:e})}i.displayName="FileQueryContext",s.displayName="FileQueryProvider"},75474(e,t,r){r.d(t,{eu:()=>l,qV:()=>s,sq:()=>c});var n=r(74848),o=r(53462),i=r(96540);let a=i.createContext({});function s({children:e,refInfo:t,path:r,action:o,error:s,copilotAccessAllowed:l=!1,copilotSpacesEnabled:c,modelsAccessAllowed:u,modelsRepoIntegrationEnabled:d,isMarketplaceEnabled:h}){let p=(0,i.useMemo)(()=>({refInfo:t,path:r,action:o,error:s,copilotAccessAllowed:l,copilotSpacesEnabled:c,modelsAccessAllowed:u,modelsRepoIntegrationEnabled:d,isMarketplaceEnabled:h}),[t,r,o,s,l,c,u,d,h]);return(0,n.jsx)(a,{value:p,children:e})}function l(){return i.use(a)}function c(){return(0,o.X)()}a.displayName="FilesPageInfoContext",s.displayName="FilesPageInfoProvider"},77277(e,t,r){r.d(t,{T:()=>d});var n=r(70516),o=r(62850),i=r(32764),a=r(81191),s=r(32343),l=r(68695),c=r(96540),u=r(556);function d(){let e,t,r,d,h,{sendAnalyticsEvent:p}=(0,s.s)(),m=(r=(e=(0,n.t)(),t=(0,u.i)(),(0,c.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])),d=(0,n.t)(),h=(0,o.yH)(i.tTz,{owner:d.ownerLogin,repo:d.name}),(0,c.useCallback)((e,t,n)=>{let o={target:e,interaction:t,context:n,...r,...{url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")}};(0,l.lS)(h,{method:"POST",body:o})},[r,h])),w=(0,a.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,c.useCallback)((e,t={})=>{p("repository.click",e,t),w&&m(e,"click",t)},[p,m,w]),sendRepoKeyDownEvent:(0,c.useCallback)((e,t={})=>{p("repository.keydown",e,t),w&&m(e,"keydown",t)},[p,m,w]),sendStats:(0,c.useCallback)((e,t={})=>{p(e,"",t),w&&m(e,"stats",t)},[p,m,w]),sendMarketplaceActionEvent:(0,c.useCallback)((e,t={})=>{p("marketplace.action.click",e,t)},[p])}}},58690(e,t,r){r.d(t,{o:()=>d});var n=r(5225),o=r(70516),i=r(32764),a=r(68695),s=r(96540);async function l(e){let t=await (0,a.lS)(e);return t.ok?await t.json():void 0}let c=new Map,u=(0,n.A)(l,{cache:c});function d(e,t,r){let n=(0,o.t)(),[a,l]=(0,s.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:n,commitOid:e,includeDirectories:!r});return(0,s.useEffect)(()=>{let e=!1,r=async()=>{l({list:[],directories:[],loading:!0});let t=await u(c);if(e)return;let r=t?.paths||[],n=t?.directories||[];l({list:r.concat(n).sort(),directories:n,error:!t})};return t&&r(),function(){e=!0}},[c,t,r]),a}},65513(e,t,r){r.d(t,{Z:()=>l});var n=r(75474),o=r(70516),i=r(32764),a=r(35349),s=r(96540);function l(){let e=(0,o.t)(),{path:t,action:r,refInfo:l}=(0,n.eu)(),{isServer:c}=(0,a.V)(),u=(0,i.WKU)({repo:e}),d=s.useCallback(t=>(0,i.IO9)({repo:e,commitish:l.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,l.name]);function h(e){return e?`?${e}`:""}function p(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:d,getFileTreeUrl:s.useCallback(()=>u,[u]),getUrl(n={}){let o=(0,i.IO9)({repo:e,commitish:n.commitish||l.name,action:n.action||r,path:n.path||t})+function({params:e,hash:t}){return h(e)+p(t)}(n);return n.absolute?new URL(o,window.location.origin).href:o},createPermalink(n={}){let o=(0,i.IO9)({repo:e,commitish:l.currentOid,action:n.action||r,path:n.path||t})+function({params:e,hash:t}){return h(e)+p(t)}(n);return n.absolute?new URL(o,window.location.origin).href:o},isCurrentPagePermalink:()=>!c&&l.name===l.currentOid&&window.location.pathname.includes(l.currentOid)}}},34604(e,t,r){r.d(t,{z:()=>WebWorker});var n=r(35750),o=r(18150),i=r(85242),a=r(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,a._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var s=new WeakMap,l=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,n._)(this,s))return;let t={data:(0,n._)(this,l).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,i._)(this,s,!0)}constructor(e){(0,o._)(this,s,{writable:!0,value:!1}),(0,a._)(this,"onmessage",void 0),(0,o._)(this,l,{writable:!0,value:void 0}),(0,i._)(this,l,e)}}},57790(e,t,r){r.d(t,{j:()=>a});var n=r(5225),o=r(91385);let i=(0,n.A)(o.fN);function a({data:e}){let{query:t,baseList:r,startTime:n}=e,a=t.replaceAll("\\","");return{query:t,list:r.filter(e=>{var t,r;return t=e,""===(r=a)||(0,o.qA)(r,t)&&i(r,t)>0}).sort((e,t)=>i(a,t)-i(a,e)),baseCount:r.length,startTime:n}}},95232(e,t,r){r.d(t,{m:()=>i});var n=r(74848),o=r(21373);function i({onSave:e,onCancel:t,saveButtonText:r,isLoading:i=!1,loadingAnnouncement:a="",disabled:s=!1}){return(0,n.jsxs)("div",{className:"SpaceDialogFooter-module__footerContainer__RmnsPqs",children:[(0,n.jsx)(o.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,n.jsx)(o.Q,{variant:"primary",loading:i,loadingAnnouncement:a,onClick:e,disabled:s,children:r})]})}i.displayName="SpaceDialogFooter"},45935(e,t,r){r.d(t,{E:()=>h});var n=r(74848),o=r(11544),i=r(9652),a=r(68695),s=r(4925),l=r(45596),c=r(7624),u=r(18990),d=r(96540);function h({onSelect:e,repoId:t}){let r,h,p,[m,w]=(0,d.useState)([]),[f,g]=(0,d.useState)(!1),[_,b]=(0,d.useState)(void 0),y=(0,d.useCallback)(t=>{b(t),e(t)},[e]),k=(0,d.useCallback)(()=>{w([]),g(!0)},[]);return(0,d.useEffect)(()=>{(async()=>{try{let e=t?`/github-copilot/chat/custom_copilots_owners?repo_id=${t}`:"/github-copilot/chat/custom_copilots_owners",r=await (0,a.lS)(e),n=await r.json(),o=n?.owners;if(!r.ok||!o)return void k();w(o),o[0]&&y(o[0])}catch{k()}})()},[k,y,t]),(0,n.jsx)("div",{className:"mt-2 mb-1",children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A.Label,{required:!0,children:"Owner"}),(0,n.jsxs)(l.W,{children:[(r=_?.name||"Choose an owner",h=_?(0,n.jsx)(o.r,{src:_.avatarUrl},_.avatarUrl):void 0,(0,n.jsx)(l.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-describedby":"owner-caption",leadingVisual:h,children:r})),(0,n.jsx)(l.W.Overlay,{width:"large",maxHeight:"large",className:"SpacesOwnerDropdown-module__ownerDropdownOverlay__u95lnMh",children:(0,n.jsx)(u.l,{children:(0,n.jsx)(u.l.Group,{className:"SpacesOwnerDropdown-module__ownerListGroup__OOLsKYk",children:(0,n.jsxs)(u.l,{selectionVariant:"single",children:[m&&m.map(e=>{let{name:t,avatarUrl:r,displayName:i}=e;return(0,n.jsxs)(u.l.Item,{selected:t===_?.name,onSelect:()=>y(e),className:"SpacesOwnerDropdown-module__ownerListItem__NAnHtbh",children:[(0,n.jsx)(u.l.LeadingVisual,{children:(0,n.jsx)(o.r,{src:r})}),t,(0,n.jsx)(u.l.Description,{children:i})]},t)}),!m.length&&!f&&(0,n.jsx)(u.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),f&&(0,n.jsx)(u.l.Item,{disabled:!0,className:"SpacesOwnerDropdown-module__errorListItem__kj3ZY6U",children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,n.jsx)(c.A.Caption,{id:"owner-caption",children:(p=e=>(0,n.jsxs)("span",{className:"sr-only",children:["Space owner. Required. Selected owner: @",e.displayName,"."]}),_?"User"===_.type?(0,n.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink flex-items-center",children:[p(_),(0,n.jsx)(s.A,{className:"mr-1",children:"Private"}),(0,n.jsx)("span",{...(0,i.G)("owner-user-caption"),children:"Only you will be able to see this space."})]}):(0,n.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink",children:[p(_),(0,n.jsx)(s.A,{className:"SpacesOwnerDropdown-module__orgLabel__7Ue1jDJ",children:"Private"}),(0,n.jsx)("span",{...(0,i.G)("owner-org-caption"),children:"Only visible to you and organization admins. You can share it later."})]}):(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"sr-only",children:"Space owner. Required."})," Where we will store your space."]}))})]})})}h.displayName="SpacesOwnerDropdown"},31972(e,t,r){r.d(t,{WU:()=>l,Bj:()=>y,A2:()=>_,O6:()=>c,dp:()=>h,Lr:()=>f,ee:()=>g,vC:()=>b,X_:()=>d,Ku:()=>u,CT:()=>p,kT:()=>w,rP:()=>m});var n=r(22437),o=r(74789),i=r(68695);function a(e,t){if(!e||!t)return null;let r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=RegExp(`<([^>]+)>;\\s*rel=["']?${r}["']?`,"i"),o=e.match(n);return o?.[1]??null}let s="/github-copilot/chat",l=30,c=["copilot-chat","custom-copilots"],u=["copilot-chat","custom-copilots","count"];function d(e){return["copilot-chat","custom-copilots",e]}function h(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function p(e){let t=e?`${s}/custom_copilots?type=${e}`:`${s}/custom_copilots`,r=await (0,i.lS)(t);if(!r.ok)throw Error(`Failed to fetch spaces: ${n.nN[r.status]||n.DW}`);return await r.json()}async function m(e){let t,{type:r,perPage:o=l,cursor:c}=e;if(c){let e=new URL(c,window.location.origin);r&&!e.searchParams.has("type")&&e.searchParams.set("type",r),t=e.pathname+e.search}else{let e=new URLSearchParams;r&&e.set("type",r),e.set("per_page",String(Math.min(Math.max(o,1),100)));let n=e.toString();t=`${s}/custom_copilots${n?`?${n}`:""}`}let u=await (0,i.lS)(t);if(!u.ok)throw Error(`Failed to fetch spaces: ${n.nN[u.status]||n.DW}`);let d=await u.json(),h=u.headers.get("Link");return{spaces:d,pagination:{nextCursor:a(h,"next"),prevCursor:a(h,"prev")}}}async function w(e,t){let r=`${s}/custom_copilots/search?type=${e}&q=${encodeURIComponent(t)}`,o=await (0,i.lS)(r);if(!o.ok)throw Error(`Failed to search spaces: ${n.nN[o.status]||n.DW}`);return await o.json()}async function f(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:r}=e,o=`${s}/custom_copilots/${t}/${r}`,a=await (0,i.lS)(o);if(!a.ok)return{status:a.status,ok:!1,error:n.nN[a.status]||n.DW};let l=await a.json();return{status:a.status,ok:!0,payload:l}}async function g(e){let t=await (0,i.lS)((0,o.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function _(e){let t=await (0,i.lS)(`${(0,o.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}async function b(e){let t=await (0,i.lS)(`${(0,o.fn)(e)}/menu_actions`);if(!t.ok)throw Error("Error fetching menu actions");try{let e=await t.json();return{visibility:e.visibility??"private",shareable:e.shareable??!1,editable:e.editable??!1,adminable:e.adminable??!1,baseRole:e.baseRole??"none",public:e.public??!1}}catch(e){throw Error(`Error parsing menu actions: ${e}`)}}async function y(){let e=await (0,i.lS)(`${s}/custom_copilots/count`);if(!e.ok)throw Error(`Failed to fetch spaces count: ${n.nN[e.status]||n.DW}`);return e.json()}},40447(e,t,r){r.d(t,{M:()=>n});function n(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},32471(e,t,r){function n(e,t,r=.1){let o=a(e,t,r);return o&&-1===t.indexOf("/")&&(o+=a(e.substring(e.lastIndexOf("/")+1),t,r)),o}function o(e,t,r){if(t){let n=e.innerHTML.trim().match(r||function(e){let t=e.toLowerCase().split(""),r="",n=!0;for(let e of t){let t=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");n?(r+=`(.*)(${t})`,n=!1):r+=`([^${t}]*?)(${t})`}return RegExp(`${r}(.*?)$`,"i")}(t));if(!n)return;let o=!1,i=[];for(let e=1;e<n.length;++e){let t=n[e];t&&(e%2==0?o||(i.push("<mark>"),o=!0):o&&(i.push("</mark>"),o=!1),i.push(t))}e.innerHTML=i.join("")}else{let t=e.innerHTML.trim(),r=t.replace(/<\/?mark>/g,"");t!==r&&(e.innerHTML=r)}}r.d(t,{He:()=>o,UD:()=>s,dt:()=>n});let i=new Set([" ","-","_"]);function a(e,t,r=.1){let n=e;if(n===t)return 1;let o=n.length,s=0,l=0,c=!0;for(let e of t){let t=n.indexOf(e.toLowerCase()),a=n.indexOf(e.toUpperCase()),u=Math.min(t,a),d=u>-1?u:Math.max(t,a);if(-1===d)return 0;s+=.1,n[d]===e&&(s+=.1),0===d&&(s+=.9-r,c&&(l=1)),i.has(n.charAt(d-1))&&(s+=.9-r),n=n.substring(d+1,o),c=!1}let u=t.length,d=s/u,h=(u/o*d+d)/2;return l&&h+r<1&&(h+=r),h}function s(e,t){return e.score>t.score?-1:e.score<t.score?1:e.text<t.text?-1:1*!!(e.text>t.text)}}}]);
//# sourceMappingURL=53003-3899368640b09c81-8521aaba915975c1.js.map